---
title: "如何使用Cocoapods管理组件"
layout: article
author: Tom Liu
date: 2020-11-10 14:07:19 +0800
tag: ["cocoapods", "best practice"]
categories: ["Develop Tools"]
---



目前我们的项目工程使用`cocoapods` 来管理依赖，同时我们对项目进行组件化的时候，`cocoapods`也是必要的组件生命周期管理工具。


<!--more-->

---


## **组件的生命周期**

- 组件需求

- **创建**

- 编写

- **发布**

- 使用及反馈

- **更新和升级**

- 废弃



## 组件的需求评审过程



需求（尤其是业务组件的）这个层面，现状是基本上就只有编写的人清楚。

产品经理变动一下、交叉一下都导致后续的维护和更新变得困难。

所以一般编写组件，我们会有专门的管理组件的人产品经理来帮助开发**整理需求**，协助开发和测试对整个组件进行**测试**和**验收**。



## 组件的编写过程需要有严格的流程和基本的标准



拿编写这个过程来说，我们的标准可能不够清晰。

我们的编码可能没有达到某些个标准，比如   `code guidelines`

当然还有一些SDK级的标准，举几个我们基本都需要遵守的：bm 

- 参数尽可能少，超多4个参数需要考虑采用结构体/类封装。

- 一个接口需要新增参数，可以考虑新增一个接口兼容原来的接口，类似初级和次级初始化方法

- 没有一个接口是多余的

- 同样，没有一个接口是可以被允许没有注释的

- 依赖要清晰的传递，构造函数、setter方法等等

- 我们的组件大多数通信场景比较简单，所以初始化方法很重要需要尽量写好

- 确定版本号，实际上，你可能已经在做一些近似的事情了。问题在于只是“近似”还不够。原则参考[语意化版本控制](https://semver.org/lang/zh-CN/) ：

  - 主版本号：当你做了不兼容的 API 修改
  - 次版本号：当你做了向下兼容的功能性新增
  - 修订号：当你做了向下兼容的问题修正

- 组件每一次发布之后，更新  `ReadMe` 

  - 添加`Usage`
  - 添加`update log` [如何维护更新日志](https://keepachangelog.com/zh-CN/1.0.0/)

  